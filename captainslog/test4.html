<!DOCTYPE html>

<html>

<head>
	<title>Test 4</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-72060507-1', 'auto');
		ga('send', 'pageview');
	</script>

	<script>
		function reload() {
			var output = "";
			// loop through localStorage backward and print log on screen
			for (var i = localStorage.length-1; i >= 0; i--) {
				output = output + "<p>" 
								+ localStorage.key(i) + " - " 
								+ localStorage.getItem(localStorage.key(i))
								+ "</p>\n";
			}
			$("#log").html(output);
		}

		// make sure that the messages are printed out when this file is opened
		reload();

		function newMessage() {
			var date = new Date();
			var options = {weekday: 'short', month: 'short', day: 'numeric', 
						   year: 'numeric', hour: 'numeric', 
						   minute: 'numeric', second: 'numeric',
		        		   timeZone: 'America/New_York', 
		        		   timeZoneName: 'short'};

		    // get the input
			var txt = $("#msg").val();

			// store in localStorage with date as keys
			localStorage.setItem(new Date().toLocaleString('en-US', options), '$' + txt + ' (on test 4)');

			ga('send', 'event', 'Donation', 'Click', 'Submit donation');

			// call reload() to immediately print out the entered message
			reload();
		}	
	</script>
</head>

<body>
	<h1>Test 4</h1>
	<h3>Amonut: <input type="number" id="msg" name="msg" size="30"/></h3>
	<button onclick="newMessage()">Submit</button>
	<div id="log"></div>
</body>
</html>